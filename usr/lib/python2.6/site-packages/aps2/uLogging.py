import sys
import codecs
import time
import logging
import os
import shutil


FATAL = 50
ERROR = 40
INFO = 20
DEBUG = 10
TRACE = 5

DEFAULT_FILE = '/var/log/httpd/ssl_error_log'
DEFAULT_LEVEL = DEBUG

logging.addLevelName(TRACE, "TRACE")

def trace(self, message, *args, **kws):
    if self.isEnabledFor(TRACE):
        self._log(TRACE, message, args, **kws)


def getLogger(logFile = DEFAULT_FILE, logLevel = DEFAULT_LEVEL):
    global logger
    logger = logging.getLogger('myapp')
    if not logger.handlers:
        hdlr = logging.FileHandler(logFile)
        formatter = logging.Formatter('%(asctime)s %(levelname)s %(message)s')
        hdlr.setFormatter(formatter)
        logger.addHandler(hdlr)
    logger.setLevel(logLevel)
    return logger

def setLogFile(self, logFile):
    hdlr = logging.FileHandler(logFile)
    formatter = logging.Formatter('%(asctime)s %(levelname)s %(message)s')
    hdlr.setFormatter(formatter)
    for hd in logger.handlers:  # remove all old handlers
        logger.removeHandler(hd)
    logger.addHandler(hdlr)

logging.Logger.trace = trace
logging.Logger.setLogFile = setLogFile


__all__ = ["FATAL", "ERROR", "INFO", "DEBUG", "TRACE"]


